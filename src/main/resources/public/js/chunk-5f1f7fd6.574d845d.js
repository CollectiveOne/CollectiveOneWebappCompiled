(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f1f7fd6"],{"0e6c":function(t,s,e){"use strict";var i=e("83e0"),a=e.n(i);a.a},"10ce":function(t,s,e){},"25e1":function(t,s,e){},3068:function(t,s,e){},"3ab8":function(t,s,e){"use strict";var i=e("4cb43"),a=e.n(i);a.a},"449d":function(t,s,e){"use strict";var i=e("10ce"),a=e.n(i);a.a},"470c":function(t,s,e){},"4ab8":function(t,s,e){"use strict";var i=e("a1db"),a=e.n(i);a.a},"4cb43":function(t,s,e){},56872:function(t,s,e){"use strict";var i=e("470c"),a=e.n(i);a.a},"60c9":function(t,s,e){"use strict";var i=e("25e1"),a=e.n(i);a.a},"71cc":function(t,s,e){},"760c":function(t,s,e){},"7eb7":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"transfer-section"},[i("transition",{attrs:{name:"slideDownUp"}},[t.showNewTokenModal?i("app-new-token-modal",{attrs:{initiativeId:t.initiative.id},on:{close:function(s){t.tokenModalClosed()}}}):t._e()],1),i("transition",{attrs:{name:"slideDownUp"}},[t.showAssignationModal?i("app-assignation-modal"):t._e()],1),i("transition",{attrs:{name:"slideDownUp"}},[t.showNewAssignationModal?i("app-new-assignation-modal",{attrs:{initiative:t.initiative},on:{close:function(s){t.showNewAssignationModal=!1},created:function(s){t.triggerUpdateCall()}}}):t._e()],1),i("transition",{attrs:{name:"slideDownUp"}},[t.showNewInitiativeTransferModal?i("app-new-initiative-transfer-modal",{attrs:{initiative:t.initiative},on:{close:function(s){t.showNewInitiativeTransferModal=!1},created:function(s){t.triggerUpdateCall()}}}):t._e()],1),i("div",{staticClass:"section-container w3-display-container"},[i("div",{staticClass:"assets-div"},[i("div",{staticClass:"w3-card"},[i("header",{staticClass:"section-header-bar w3-bar gray-1"},[i("h4",{staticClass:"w3-bar-item w3-left"},[t._v(t._s(t.$t("tokens.TOKENS"))+" ")]),i("popper",{attrs:{"append-to-body":!0,trigger:"click",options:t.popperOptions,toggleShow:t.toggleDropdown}},[i("div",{},[i("app-drop-down-menu",{staticClass:"drop-menu",attrs:{items:t.assetsMenuItems},on:{"create-new":function(s){t.createNewToken()},"toggle-deleted":function(s){t.toggleDeleted()}}})],1),i("div",{staticClass:"expand-btn w3-xlarge fa-button w3-right",attrs:{slot:"reference"},slot:"reference"},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})])])],1),i("div",{staticClass:"assets-content-div"},[0===t.assets.length&&!t.loading&&t.isLoggedAnAdmin?i("div",{staticClass:"w3-center"},[t._v("\n            "+t._s(t.$t("tokens.NO_ASSETS_HELD"))),i("br"),i("button",{staticClass:"w3-button app-button w3-margin-top",attrs:{name:"button"},on:{click:function(s){t.showNewTokenModal=!0}}},[t._v("\n              "+t._s(t.$t("general.CREATE_NEW"))+"\n            ")])]):t._e(),t.loading?i("div",{staticClass:"w3-row w3-center loader-gif-container"},[i("img",{staticClass:"loader-gif",attrs:{src:e("cf1c"),alt:""}})]):i("div",{},t._l(t.assets,function(s,e){return i("div",{key:s.assetId,staticClass:"w3-row"},[e>0?i("hr"):t._e(),i("app-asset-distribution-chart",{attrs:{assetId:s.assetId,initiativeId:t.initiative.id,canMint:t.initiative.ownAssetsIds.includes(s.assetId),canEdit:t.isLoggedAnAdmin},on:{"new-assignation":function(s){t.newAssignation(s)},"new-transfer":function(s){t.newTransfer(s)},"please-update":function(s){t.updateAssets()}}})],1)}))])])]),i("div",{staticClass:"own-transfers-div"},[i("h3",{staticClass:"section-header"},[t._v(t._s(t.$t("tokens.TRANSFERS_HISTORY_FROM",{initName:t.initiative.meta.name}))+":")]),i("app-transfers-tables",{attrs:{initiativeId:t.initiative.id,ofSubinitiatives:!1,triggerUpdate:t.triggerUpdate}})],1),t.hasSubinitiatives?i("div",{staticClass:"sub-transfers-div"},[i("hr"),i("h3",{staticClass:"section-header"},[t._v(t._s(t.$t("tokens.TRANSFERS_HISTORY_FROM_SUBINITIATIVES_OF",{initName:t.initiative.meta.name}))+":")]),i("app-transfers-tables",{attrs:{initiativeId:t.initiative.id,ofSubinitiatives:!0,triggerUpdate:t.triggerUpdate}})],1):t._e()])],1)},a=[],n=(e("7f7f"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-modal"},[e("div",{staticClass:"w3-modal-content"},[e("div",{staticClass:"w3-card-4 app-modal-card"},[e("div",{staticClass:"close-div w3-display-topright w3-xlarge",on:{click:function(s){t.closeThis()}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t._m(0),e("div",{staticClass:"w3-container form-container"},[e("div",{staticClass:"w3-row-padding"},[e("div",{staticClass:"w3-col m6"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],staticClass:"w3-input w3-border w3-hover-light-grey",attrs:{type:"number"},domProps:{value:t.amount},on:{input:function(s){s.target.composing||(t.amount=t._n(s.target.value))},blur:function(s){t.$forceUpdate()}}})]),e("div",{staticClass:"w3-col m6",style:{"margin-bottom":"15px"}},[t._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"w3-input w3-border w3-hover-light-grey",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})])]),e("app-error-panel",{attrs:{show:t.tokenNameEmptyShow,message:"token name cannot be empty define the name of the token."}}),e("app-error-panel",{attrs:{show:t.tokenNameTooLong,message:"token name too long."}}),e("hr"),e("div",{staticClass:"bottom-btns-row w3-row-padding"},[e("div",{staticClass:"w3-col m6"},[e("button",{staticClass:"w3-button app-button-light",attrs:{type:"button"},on:{click:function(s){t.closeThis()}}},[t._v("Cancel")])]),e("div",{staticClass:"w3-col m6"},[e("button",{staticClass:"w3-button app-button",attrs:{type:"button"},on:{click:function(s){t.accept()}}},[t._v("Accept")])])])],1)])])])}),o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-container w3-border-bottom"},[e("h2",[t._v("Create a new type of token")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",{},[e("b",[t._v("Number of Tokens")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",{},[e("b",[t._v("Token Name")])])}],r={components:{},props:{initiativeId:{type:String,default:""}},data:function(){return{amount:0,name:"tokens",tokenNameEmptyError:!1}},computed:{tokenNameEmpty:function(){return""===this.name},tokenNameEmptyShow:function(){return this.tokenNameEmptyError&&this.tokenNameEmpty},tokenNameTooLong:function(){return this.name.length>10}},methods:{closeThis:function(){this.$emit("close")},tokensSelected:function(t){this.amount=t.tokens,this.name=t.tokenName},accept:function(){var t=this,s=!0;if(this.tokenNameEmpty&&(s=!1,this.tokenNameEmptyError=!0),this.tokenNameTooLong&&(s=!1),s){var e={assetName:this.name,ownedByThisHolder:this.amount};this.axios.post("/1/initiative/"+this.initiativeId+"/token",e).then(function(s){t.$store.dispatch("refreshInitiative"),t.closeThis()})}}},mounted:function(){}},c=r,l=(e("60c9"),e("2877")),u=Object(l["a"])(c,n,o,!1,null,"4de54055",null);u.options.__file="NewTokenModal.vue";var d=u.exports,v=e("3781"),p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-modal"},[e("div",{staticClass:"w3-modal-content"},[t.assignation?e("div",{staticClass:"w3-card-2 assignation-container w3-display-container"},[e("div",{staticClass:"w3-row"},[e("div",{staticClass:"w3-col l4 seal-container"},[e("div",{staticClass:"w3-row"},[e("app-value-seal",{attrs:{value:t.assignation.assets[0].value,assetName:t.assignation.assets[0].assetName}})],1),e("div",{staticClass:"w3-row from-row w3-center "},[e("div",{staticClass:"w3-tag w3-round noselect",style:{"background-color":t.$store.getters.colorOfInitiative(t.assignation.initiativeId)},domProps:{innerHTML:t._s(t.$t("tokens.FROM_NAME",{name:t.assignation.initiativeName}))}})]),e("div",{staticClass:"w3-row w3-center w3-margin-top"},[t._v("\n            "+t._s(t.dateString(t.assignation.creationDate))+"\n          ")])]),e("div",{staticClass:"w3-col l8 w3-container "},[e("div",{staticClass:"w3-row w3-center"},[e("h3",[t._v(t._s(t.assignation.motive))])]),t.assignation.notes.length>0?e("div",{staticClass:"w3-row w3-center"},[t.assignation.notes?e("vue-markdown",{staticClass:"marked-text",attrs:{source:t.assignation.notes,anchorAttributes:{target:"_blank"}}}):t._e()],1):t._e(),e("div",{staticClass:"w3-row w3-center"},[e("div",{staticClass:"receivers-container"},t._l(t.assignation.receivers,function(t){return e("div",{key:t.id,staticClass:"receiver-container"},[e("app-user-avatar",{staticClass:"w3-left",attrs:{user:t.user,small:!0,showName:!1}})],1)}))]),e("div",{staticClass:"w3-row tags-row w3-center"},[e("div",{staticClass:"w3-tag gray-1 w3-round noselect w3-small"},[e("b",[t._v(t._s(t.assignation.type))])]),e("div",{staticClass:"w3-tag w3-round noselect w3-small",class:t.stateClass},[e("b",[t._v(t._s(t.assignation.state))])])]),t.$store.getters.isLoggedAnAdmin&&t.isDone?e("div",{staticClass:"w3-row tags-row w3-center"},[e("button",{staticClass:"w3-button app-button",on:{click:function(s){t.revertTransaction=!0}}},[t._v("\n              "+t._s(t.$t("tokens.REVERT_TX"))+"\n            ")])]):t._e(),e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp"}},[t.revertTransaction?e("div",{staticClass:"w3-row tags-row w3-center"},[e("div",{staticClass:"w3-padding w3-round light-grey w3-margin-bottom"},[e("p",{domProps:{innerHTML:t._s(t.$t("tokens.REVERT_WARNING"))}})]),e("button",{staticClass:"w3-button app-button-light button-pair",on:{click:function(s){t.revertTransaction=!1}}},[t._v(t._s(t.$t("general.CANCEL"))+"\n                ")]),e("button",{staticClass:"w3-button app-button-danger button-pair",on:{click:function(s){t.orderRevert()}}},[t._v(t._s(t.$t("general.CONFIRM"))+"\n                ")])]):t._e()])],1),t.$store.getters.isLoggedAnAdmin&&t.isOpen?e("div",{staticClass:"w3-row tags-row w3-center"},[e("button",{staticClass:"w3-button app-button",on:{click:function(s){t.deleteTransaction=!0}}},[t._v("\n              "+t._s(t.$t("general.DELETE"))+"\n            ")])]):t._e(),e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp"}},[t.deleteTransaction?e("div",{staticClass:"w3-row tags-row w3-center"},[e("div",{staticClass:"w3-padding w3-round light-grey w3-margin-bottom"},[e("p",{domProps:{innerHTML:t._s(t.$t("tokens.DELETE_WARNING"))}})]),e("button",{staticClass:"w3-button app-button-light button-pair",on:{click:function(s){t.deleteTransaction=!1}}},[t._v(t._s(t.$t("general.CANCEL"))+"\n                ")]),e("button",{staticClass:"w3-button app-button-danger button-pair",on:{click:function(s){t.deleteAssignation()}}},[t._v(t._s(t.$t("general.CONFIRM"))+"\n                ")])]):t._e()])],1),t.$store.getters.isLoggedAnAdmin&&t.isOnHold?e("div",{staticClass:"w3-row tags-row w3-center"},[e("button",{staticClass:"w3-button app-button",on:{click:function(s){t.openAssignation=!0}}},[t._v("\n              "+t._s(t.$t("token.OPEN_START_EVALS"))+"\n            ")])]):t._e(),e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp"}},[t.openAssignation?e("div",{staticClass:"w3-row tags-row w3-center"},[e("div",{staticClass:"w3-padding w3-round light-grey w3-margin-bottom"},[e("p",{domProps:{innerHTML:t._s(t.$t("tokens.OPEN_WARNING",{days:t.assignation.config.maxDuration}))}})]),e("button",{staticClass:"w3-button app-button-light button-pair",on:{click:function(s){t.openAssignation=!1}}},[t._v(t._s(t.$t("general.CANCEL"))+"\n                ")]),e("button",{staticClass:"w3-button app-button-danger button-pair",on:{click:function(s){t.openAssignationClick()}}},[t._v(t._s(t.$t("general.CONFIRM"))+"\n                ")])]):t._e()])],1),t.isReceiverApproval?e("div",{staticClass:"w3-center"},[e("div",{staticClass:"w3-padding w3-round light-grey w3-margin-bottom"},[e("p",{domProps:{innerHTML:t._s(t.$t("tokens.REVERT_WARNING",{days:t.assignation.config.maxDuration}))}})]),this.loggedReceiver.revertApproval?e("div",{},[e("div",{staticClass:"w3-tag w3-padding app-button button-pair noselect"},[t._v(t._s(t.$t("tokens.APPROVED_MSG"))+"\n              ")])]):e("div",{},[e("button",{staticClass:"w3-button app-button-light button-pair",on:{click:function(s){t.approveRevert(!1)}}},[t._v(t._s(t.$t("tokens.REJECT"))+"\n              ")]),e("button",{staticClass:"w3-button app-button button-pair",on:{click:function(s){t.approveRevert(!0)}}},[t._v(t._s(t.$t("tokens.APPROVE"))+"\n              ")])])]):t._e(),t.showStatus?e("div",{staticClass:"w3-row w3-center"},[e("b",[t._v(t._s(t.$t("tokens.PEER_REV_STATUS",{nEvalsPending:t.assignation.evaluationsPending,timeRemaining:t.getTimeStrUntil(t.assignation.config.maxClosureDate)})))])]):t._e()])]),t.isDirect?e("div",{staticClass:"w3-row"},[t.assignation.receivers.length>1?e("div",{},[e("app-users-percentages",{attrs:{usersData:t.assignation.receivers,disable:!0,showSelfBiases:!1,showTotal:!0,totalTokens:t.assignation.assets[0].value}})],1):t._e()]):t._e(),e("hr"),e("div",{staticClass:"w3-row-padding"},[t.isEvaluator&&!t.isDone&&!t.isDeleted&&t.isOpen?e("div",{staticClass:"w3-col l12 my-evaluation-div w3-margin-bottom"},[e("div",{staticClass:"w3-row w3-center"},[e("h5",{},[e("b",[t._v(t._s(t.$t("tokens.MY_EVAL")))])])]),e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp"}},[t.disableEvaluations?t._e():e("div",{staticClass:"w3-panel light-grey"},[e("p",{domProps:{innerHTML:t._s(t.$t("tokens.PEER_REV_TIP"))}})])])],1),e("br"),e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("app-users-percentages",{key:t.disableEvaluations,attrs:{usersData:t.evaluationReceivers,userAnchor:"receiverUser",disable:t.disableEvaluations,totalTokens:t.assignation.assets[0].value}})],1),t.isOpen?e("div",{staticClass:"bottom-btns-row w3-center"},[t.disableEvaluations?e("button",{staticClass:"w3-button app-button",attrs:{type:"button"},on:{click:function(s){t.updateEvaluation=!0}}},[t._v("\n              "+t._s(t.$t("tokens.CHANGE_MY_EVAL"))+"\n            ")]):e("button",{staticClass:"w3-button app-button",attrs:{type:"button",disabled:!t.arePercentagesOk},on:{click:function(s){t.sendEvaluation()}}},[t._v("\n              "+t._s(t.$t("general.SAVE"))+"\n            ")])]):t._e()],1):t._e(),t.showResults?e("div",{staticClass:"w3-col l12"},[e("div",{staticClass:"w3-row w3-center"},[e("h5",{},[e("b",[t._v(t._s(t.$t("tokens.RESULTS")))])])]),e("br"),e("app-users-percentages",{attrs:{usersData:t.assignation.receivers,disable:!0,showSelfBiases:t.assignation.config.selfBiasVisible,myEvaluations:t.evaluationReceivers,totalTokens:t.assignation.assets[0].value}})],1):t._e()]),t.showEvaluations?e("div",{staticClass:"w3-row"},[e("hr"),e("div",{staticClass:"w3-row w3-center"},[e("h5",{},[e("b",[t._v(t._s(t.$t("tokens.ALL_EVALS")))])])]),e("br"),e("app-peer-reviewed-evaluations",{attrs:{evaluators:t.assignation.evaluators,receivers:t.assignation.receivers}})],1):t._e()]):t._e(),e("div",{staticClass:"w3-display-topright w3-xlarge close-div"},[e("router-link",{attrs:{tag:"div",to:{name:"InitiativeAssignations"}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],1)])])},h=[],g=(e("cadf"),e("551c"),e("097d"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-display-container seal-display-container"},[e("div",{staticClass:"w3-display-middle",staticStyle:{width:"100%"}},[e("div",{staticClass:"w3-row w3-center"},[e("b",{staticClass:"w3-xlarge "},[t._v(t._s(t.tokensString(t.value))+" "+t._s(t.assetName))])])])])}),f=[],w=(e("c5f6"),e("bde3")),m={props:{value:{type:Number},assetName:{type:String}},methods:{tokensString:function(t){return Object(w["g"])(t)}}},_=m,b=(e("3ab8"),Object(l["a"])(_,g,f,!1,null,"38eaaf11",null));b.options.__file="ValueSeal.vue";var E=b.exports,C=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.usersData.length>0?e("div",{staticClass:"percentages-container"},[e("table",{staticClass:"w3-table w3-striped w3-bordered w3-centered table-class"},[e("thead",[e("tr",[e("th",{staticClass:"avatar-col middle",attrs:{colspan:"2"}},[t._v(t._s(t.$t("tokens.USER_UC")))]),t.hasDonors?e("th",[t._v(t._s(t.$t("tokens.DONOR_UC")))]):t._e(),t.amEvaluator?e("th",{staticClass:"percent-col"},[t._v(t._s(t.$t("tokens.MINE_UC"))+" %")]):t._e(),t.hasDonors?e("th",{staticClass:"percent-col"},[t._v(t._s(t.$t("tokens.PRE_DONOR_UC"))+" %")]):t._e(),e("th",{staticClass:"percent-col"},[t._v(t._s(t.disable?t.$t("tokens.FINAL_UC"):"")+"%")]),t.showTotal?e("th",{staticClass:"value-col"},[t._v(t._s(t.disable?t.$t("tokens.FINAL_TOKENS_UC"):t.$t("tokens.TOTAL_UC")))]):t._e(),e("th",{staticClass:"bar-col w3-hide-small w3-hide-medium"}),!t.disable&&t.showDontKnow?e("th",[t._v(t._s(t.$t("tokens.KNOW_DONT_UC")))]):t._e(),t.showSelfBiases?e("th",{staticClass:"self-bias-col"},[t._v(t._s(t.$t("tokens.SELF_BIAS_UC")))]):t._e(),t.showRemove?e("th",{staticClass:"self-bias-col"},[t._v(t._s(t.$t("tokens.REMOVE_UC")))]):t._e()]),e("i")]),e("tbody",t._l(t.usersData,function(s,i){return e("tr",[e("td",{staticClass:"avatar-col"},[e("app-user-avatar",{staticClass:"user-container",attrs:{user:s[t.userAnchor],showName:!1}})],1),e("td",[t._v("\n          "+t._s(s[t.userAnchor].nickname)+"\n        ")]),t.hasDonors?e("td",[t._v(t._s(s.isDonor?"yes":"no"))]):t._e(),t.myEvaluations.length>0?e("td",{staticClass:"percent-col"},[t._v("\n          "+t._s(t.myEvaluationOf(s))+"\n        ")]):t._e(),t.hasDonors?e("td",{staticClass:"percent-col"},[t._v("\n          "+t._s(s.evaluatedPercent.toFixed(1))+" %\n        ")]):t._e(),e("td",{staticClass:"percent-col"},[t.disable?e("div",{},[t.isDontKnow(s)?e("div",{},[e("b",[t._v(t._s(t.$t("tokens.DONT_KNOW")))])]):e("div",{},[e("b",[t._v(t._s(s.percent.toFixed(1))+" %")])])]):e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp",mode:"out-in"}},[t.isDontKnow(s)?e("div",{key:"2"},[e("div",{staticClass:"w3-tag w3-padding w3-round gray-1 noselect"},[t._v("\n                  "+t._s(t.$t("tokens.DONT_KNOW_SHORT"))+"\n                ")])]):e("div",{key:"1"},[e("input",{staticClass:"percent-input w3-input w3-border w3-hover-light-grey w3-round",attrs:{type:"number",step:"5",min:"0",disabled:t.disable},domProps:{value:s.percent},on:{blur:function(e){t.percentUpdated(e,s)}}})])])],1)]),t.showTotal?e("td",{staticClass:"value-col"},[t.disable?e("div",{},[t.isDontKnow(s)?e("div",{},[e("b",[t._v(t._s(t.$t("tokens.DONT_KNOW")))])]):e("div",{},[e("b",[t._v(t._s((s.percent*t.totalTokens/100).toFixed(2)))])])]):e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp",mode:"out-in"}},[t.isDontKnow(s)?e("div",{key:"2"},[e("div",{staticClass:"w3-tag w3-padding w3-round gray-1 noselect"},[t._v("\n                  DK\n                ")])]):e("div",{key:"1"},[e("input",{staticClass:"percent-input w3-input w3-border w3-hover-light-grey w3-round",attrs:{type:"number",step:"5",min:"0",disabled:t.disable},domProps:{value:s.percent*t.totalTokens/100},on:{blur:function(e){t.valueUpdated(e,s)}}})])])],1)]):t._e(),e("td",{staticClass:"bar-col w3-hide-small w3-hide-medium"},[e("div",{staticClass:"light-grey w3-round"},[e("div",{staticClass:"bar-div app-blue w3-center w3-round",style:{width:s.percent+"%"}})])]),!t.disable&&t.showDontKnow?e("td",[e("button",{staticClass:"w3-button app-button dont-know-button",on:{click:function(e){t.toggleDontKnow(s)}}},[t._v("\n            "+t._s(t.isDontKnow(s)?"set":"dont know")+"\n          ")])]):t._e(),t.showSelfBiases?e("td",{staticClass:"self-bias-col",class:{"self-bias-good":s.selfBias<=0,"self-bias-bad":s.selfBias>0}},[e("b",[t._v(t._s(Math.abs(s.selfBias)<100?s.selfBias.toFixed(1)+" %":"-"))])]):t._e(),t.showRemove?e("td",{staticClass:"w3-xlarge w3-button",on:{click:function(e){t.$emit("remove",s)}}},[e("i",{staticClass:"fa fa-times-circle-o gray-1-color",attrs:{"aria-hidden":"true"}})]):t._e()])})),t.disable?t._e():e("tfoot",[e("tr",[e("td"),e("td",[t._v(t._s(t.$t("tokens.TOTAL_ASSIGNED"))+":")]),e("td",[t._v(t._s(t.sumOfPercents.toFixed())+"%")]),t.showTotal?e("td",[t._v(t._s(t.sumOfPercents*t.totalTokens/100))]):t._e(),e("td",[t._v(t._s(t.autoScaled?"("+t.$t("tokens.AUTO_ROUNDED")+")":""))])])])]),t.disable?t._e():e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp"}},[t.arePercentagesOk?t._e():e("div",{staticClass:"w3-row missing-row"},[e("div",[t._v("\n          "+t._s(t.missingPercent>0?"missing":"excess of")+": "),e("b",[t._v(t._s(Math.abs(t.missingPercent.toFixed(0)))+"%"),t.showTotal?e("span",[t._v(" / "+t._s(Math.abs(t.missingPercent/100)*t.totalTokens))]):t._e()]),e("button",{staticClass:"w3-button app-button w3-margin-left",on:{click:function(s){t.autoScale()}}},[t._v("\n            "+t._s(t.$t("tokens.AUTOSCALE"))+"\n          ")])])])])],1)]):t._e()},T=[],k={props:{usersData:{type:Array,default:function(){return[]}},disable:{type:Boolean,defualt:!1},userAnchor:{type:String,default:"user"},showSelfBiases:{type:Boolean,default:!1},myEvaluations:{type:Array,default:function(){return[]}},totalTokens:{type:Number,default:1},showDontKnow:{type:Boolean,default:!0},showTotal:{type:Boolean,default:!0},showRemove:{type:Boolean,default:!1}},data:function(){return{autoScaled:!1}},computed:{amEvaluator:function(){return!!this.myEvaluations&&this.myEvaluations.length>0},hasDonors:function(){for(var t in this.usersData)if(this.usersData[t].isDonor)return!0;return!1},sumOfPercents:function(){var t=0;for(var s in this.usersData){var e=this.usersData[s];this.isDontKnow(e)||(t+=e.percent)}return t},missingPercent:function(){return 100-this.sumOfPercents},arePercentagesOk:function(){return Math.abs(this.sumOfPercents-100)<.001},feedbackText:function(){if(Math.abs(this.missingPercent)>0)return this.missingPercent>0?"missing":"in excess"},totalClass:function(){return this.arePercentagesOk?{"success-panel":!0}:{"error-panel":!0}}},methods:{floatToChar:function(t){return Object(w["c"])(t)},percentUpdated:function(t,s){s.percent=parseFloat(t.target.value),this.checkRounding(),this.$emit("users-data-updated")},valueUpdated:function(t,s){s.percent=parseFloat(t.target.value)/this.totalTokens*100,this.checkRounding(),this.$emit("users-data-updated")},checkRounding:function(){Math.abs(this.missingPercent)>0&&Math.abs(this.missingPercent)<1?this.autoScale():this.autoScaled=!1},autoScale:function(){if(this.sumOfPercents>0){var t=this.sumOfPercents/100;for(var s in this.usersData)this.usersData[s].percent*=1/t;this.autoScaled=!0}},isDontKnow:function(t){return!!t.type&&("SET"!==t.type&&("DONT_KNOW"===t.type||void 0))},toggleDontKnow:function(t){this.isDontKnow(t)?t.type="SET":(t.percent=0,t.type="DONT_KNOW")},myEvaluationOf:function(t){for(var s in this.myEvaluations)if(this.myEvaluations[s].receiverUser.c1Id===t.user.c1Id)return"DONT_KNOW"===this.myEvaluations[s].type?"DK":this.myEvaluations[s].percent.toFixed(1)+" %"}}},D=k,R=(e("56872"),Object(l["a"])(D,C,T,!1,null,"55f7a252",null));R.options.__file="UsersPercentages.vue";var y=R.exports,O=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-container table-container"},[e("table",{staticClass:"w3-table w3-striped w3-bordered w3-centered table-element"},[e("thead",[e("tr",{staticClass:"top-row"},[e("th",{attrs:{colspan:"2"}}),e("th",{attrs:{colspan:t.receivers.length}},[t._v(t._s(t.$t("tokens.RECEIVERS")))])]),e("tr",{staticClass:"evaluators-row"},[e("th",{attrs:{colspan:"2"}},[e("i",{staticClass:"fa fa-arrow-down",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("tokens.EVALUATORS")))]),t._l(t.receivers,function(t){return e("th",[e("app-user-avatar",{attrs:{user:t.user,showName:!1}})],1)})],2)]),e("tbody",t._l(t.evaluators,function(s){return e("tr",[e("td",{staticClass:"avatar-col"},[e("app-user-avatar",{staticClass:"user-container",attrs:{user:s.user,showName:!1}})],1),e("td",[t._v("\n          "+t._s(s.user.nickname)+"\n        ")]),t._l(t.receivers,function(i){return e("td",{staticClass:"w3-large"},[t._v("\n          "+t._s(t.getEvaluationOf(s,i))+"\n        ")])})],2)}))])])},S=[],I={props:{evaluators:Array,receivers:Array},methods:{getEvaluationOf:function(t,s){for(var e in t.grades){var i=t.grades[e];if(i.receiverUser.c1Id===s.user.c1Id)return"DONE"===i.state?"DONT_KNOW"===i.type?"DK":i.percent.toFixed(0)+" %":"-"}return"-"}},mounted:function(){}},A=I,$=(e("c251"),Object(l["a"])(A,O,S,!1,null,"726fbd7d",null));$.options.__file="PeerReviewedEvaluations.vue";var N=$.exports,U={components:{"app-value-seal":E,"app-users-percentages":y,"app-peer-reviewed-evaluations":N},data:function(){return{assignation:null,updateEvaluation:!1,revertTransaction:!1,deleteTransaction:!1,openAssignation:!1}},computed:{assignationId:function(){return this.$route.params.assignationId},isDirect:function(){return"DIRECT"===this.assignation.type},isPeerReviewed:function(){return"PEER_REVIEWED"===this.assignation.type},isOnHold:function(){return"ON_HOLD"===this.assignation.state},isOpen:function(){return"OPEN"===this.assignation.state},isDone:function(){return"DONE"===this.assignation.state},isRevertOrdered:function(){return"REVERT_ORDERED"===this.assignation.state},isReverted:function(){return"REVERTED"===this.assignation.state},isDeleted:function(){return"DELETED"===this.assignation.state},showResults:function(){return!(!(this.isDirect&&this.assignation.receivers.lenth>1)||this.isDeleted)||!(!this.isPeerReviewed||this.isDeleted)&&this.isDone},showStatus:function(){return this.isPeerReviewed&&this.isOpen},isEvaluator:function(){return null!==this.assignation.thisEvaluation},loggedReceiver:function(){for(var t in this.assignation.receivers)if(this.assignation.receivers[t].user.c1Id===this.$store.state.user.profile.c1Id)return this.assignation.receivers[t];return null},isReceiver:function(){return!!this.loggedReceiver},evaluationReceivers:function(){return this.assignation.thisEvaluation?this.assignation.thisEvaluation.evaluationGrades:[]},showEvaluations:function(){return this.isDone&&this.assignation.config.evaluationsVisible&&!this.isDeleted},sumOfPercents:function(){var t=0;for(var s in this.assignation.thisEvaluation.evaluationGrades){var e=this.assignation.thisEvaluation.evaluationGrades[s];this.isDontKnow(e)||(t+=e.percent)}return t},arePercentagesOk:function(){return Math.abs(this.sumOfPercents-100)<.001},evaluationDone:function(){return"DONE"===this.assignation.thisEvaluation.evaluationState},disableEvaluations:function(){return this.evaluationDone&&!this.updateEvaluation},isReceiverApproval:function(){return this.isRevertOrdered&&this.isReceiver},stateClass:function(){return this.isOpen?{"open-color":!0}:this.isDone?{"done-color":!0}:this.isRevertOrdered||this.isReverted||this.isDeleted?{"revert-color":!0}:{"gray-1":!0}}},methods:{dateString:function(t){return Object(w["b"])(t)},getTimeStrUntil:function(t){return Object(w["e"])(t)},openAssignationClick:function(){var t=this;this.openAssignation=!1,this.axios.put("/1/assignation/"+this.assignationId+"/open").then(function(s){t.updateAssignationData()})},isDontKnow:function(t){return!!t.type&&("SET"!==t.type&&("DONT_KNOW"===t.type||void 0))},updateAssignationData:function(){var t=this;this.axios.get("/1/assignation/"+this.assignationId,{params:{addAllEvaluations:!0}}).then(function(s){t.assignation=s.data.data,t.$store.commit("triggerUpdateAssets")})},sendEvaluation:function(){var t=this;this.arePercentagesOk&&this.axios.post("/1/assignation/"+this.assignation.id+"/evaluate",this.assignation.thisEvaluation).then(function(s){t.updateEvaluation=!1,t.updateAssignationData(),t.evaluationSavedMessage=!0})},orderRevert:function(){var t=this;this.revertTransaction=!1,this.axios.put("/1/assignation/"+this.assignation.id+"/revert",{}).then(function(s){t.updateAssignationData()})},approveRevert:function(t){var s=this;this.axios.put("/1/assignation/"+this.assignation.id+"/approveRevert",{},{params:{approveFlag:t}}).then(function(t){s.updateAssignationData()})},deleteAssignation:function(){var t=this;this.deleteTransaction=!1,this.axios.put("/1/assignation/"+this.assignation.id+"/delete",{}).then(function(s){t.updateAssignationData()})}},mounted:function(){this.updateAssignationData()}},L=U,P=(e("4ab8"),Object(l["a"])(L,p,h,!1,null,"39b0c45a",null));P.options.__file="AssignationModal.vue";var x=P.exports,M=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{},[e("div",{staticClass:"tabs-row w3-row w3-center"},[e("div",{staticClass:"tabs-container"},[e("div",{staticClass:"subtab-element w3-button",class:{"app-button":t.isTransfersToUsers,"app-button-light":!t.isTransfersToUsers},on:{click:function(s){t.goToAssignationsTable()}}},[t._v("\n        to users\n      ")]),e("div",{staticClass:"subtab-element w3-button",class:{"app-button":t.isTransfersToInitiatives,"app-button-light":!t.isTransfersToInitiatives},on:{click:function(s){t.goToTransfersTable()}}},[t._v("\n        to initiatives\n      ")])])]),e("div",{staticClass:"w3-row"},[e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:t.transfersTableTransition,mode:"out-in"}},[e(t.transfersTableComponent,{key:t.transfersTableComponent.name,tag:"component",attrs:{url:t.url,showFrom:t.ofSubinitiatives,triggerUpdate:t.triggerUpdate}})],1)],1)])])},V=[],F=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"full-table-container"},[t.assignations.length>0?e("table",{staticClass:"w3-table w3-striped w3-bordered w3-centered table-element"},[e("thead",[e("tr",[e("th",{staticClass:"w3-hide-small"},[t._v(t._s(t.$t("tokens.DATE_UC")))]),e("th",[t._v(t._s(t.$t("tokens.STATUS_UC")))]),t.showFrom?e("th",[t._v(t._s(t.$t("tokens.FROM_UC")))]):t._e(),e("th",[t._v(t._s(t.$t("tokens.VALUE_UC")))]),e("th",[t._v(t._s(t.$t("tokens.TO_UC")))]),e("th",{staticClass:"w3-hide-small"},[t._v(t._s(t.$t("tokens.TYPE_UC")))]),e("th",{staticClass:"w3-hide-small"},[t._v(t._s(t.$t("tokens.MOTIVE_UC")))]),e("th",[t._v(t._s(t.$t("general.MORE")))])])]),e("tbody",t._l(t.assignations,function(s){return e("tr",{key:s.id},[e("td",{staticClass:"w3-hide-small"},[t._v(t._s(t.dateString(s.creationDate)))]),e("td",[e("router-link",{staticClass:"w3-tag w3-small w3-round-large w3-padding-small noselect cursor-pointer",class:t.stateTagClass(s),attrs:{tag:"div",to:{name:"InitiativeAssignation",params:{assignationId:s.id}}}},[t._v("\n            "+t._s(t.assignationState(s))+"\n          ")])],1),t.showFrom?e("td",[e("router-link",{staticClass:"w3-tag w3-round-large cursor-pointer noselect",style:{"background-color":t.$store.getters.colorOfInitiative(s.initiativeId)},attrs:{tag:"div",to:{name:"Initiative",params:{initiativeId:s.initiativeId}}}},[t._v("\n            "+t._s(s.initiativeName)+"\n          ")])],1):t._e(),e("td",[t._v(t._s(t.tokensString(s.assets[0].value))+" "+t._s(s.assets[0].assetName))]),e("td",{staticClass:"avatar-col"},[e("div",{staticClass:"avatars-container"},t._l(s.receivers,function(t){return e("div",{staticClass:"avatar-container"},[e("app-user-avatar",{attrs:{user:t.user,showName:!1,small:!0,enableHover:!1}})],1)}))]),e("td",{staticClass:"w3-hide-small"},[t._v(t._s(t.assignationType(s)))]),e("td",{staticClass:"w3-hide-small"},[t._v(t._s(s.motive))]),e("router-link",{staticClass:"cursor-pointer gray-1-color w3-button",attrs:{tag:"td",to:{name:"InitiativeAssignation",params:{assignationId:s.id}}}},[e("i",{staticClass:"fa fa-external-link",attrs:{"aria-hidden":"true"}})])],1)}))]):e("div",{staticClass:"empty-div"},[t._v("\n    "+t._s(t.$t("general.NO_RESULTS_FOUND"))+"\n  ")]),e("div",{staticClass:"w3-row w3-center w3-margin-top"},[t.showMore?e("button",{staticClass:"w3-button app-button-light",attrs:{type:"button",name:"button"},on:{click:function(s){t.showMoreClick()}}},[t._v("\n      "+t._s(t.$t("general.SHOW_MORE"))+"...\n    ")]):t._e()])])},B=[],j={name:"assignationsTable",props:{url:{type:String,default:""},showFrom:{type:Boolean,default:!1},triggerUpdate:{type:Boolean,default:!1}},data:function(){return{assignations:[],currentPage:0,showMore:!0}},watch:{triggerUpdate:function(){this.resetData()}},methods:{resetData:function(){this.assignations=[],this.currentPage=0,this.getData()},getData:function(){var t=this;this.axios.get(this.url,{params:{page:this.currentPage,size:10,sortDirection:"DESC",sortProperty:"creationDate"}}).then(function(s){s.data.data.length<10&&(t.showMore=!1),t.assignations=t.assignations.concat(s.data.data)})},showMoreClick:function(){this.currentPage+=1,this.getData()},tokensString:function(t){return Object(w["g"])(t)},dateString:function(t){return Object(w["b"])(t)},assignationType:function(t){switch(t.type){case"PEER_REVIEWED":return"PR";case"DIRECT":return"D"}return""},assignationState:function(t){switch(t.state){case"OPEN":return t.thisEvaluation?"PENDING"===t.thisEvaluation.evaluationState?"EVALUATE":"REVIEW":"OPEN";default:return t.state}},stateTagClass:function(t){switch(t.state){case"ON_HOLD":return{"on-hold-color":!0};case"OPEN":return{"open-color":!0};case"DONE":return{"done-color":!0};case"REVERT_ORDERED":case"REVERTED":case"DELETED":return{"revert-color":!0}}}},created:function(){this.resetData()}},W=j,H=(e("d822"),Object(l["a"])(W,F,B,!1,null,"3d06979e",null));H.options.__file="AssignationsTable.vue";var K=H.exports,G=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"full-table-container"},[t.transfers.length>0?e("table",{staticClass:"w3-table w3-striped w3-bordered w3-centered"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("tokens.DATE_UC")))]),t.showFrom?e("th",[t._v(t._s(t.$t("tokens.FROM_UC")))]):t._e(),e("th",[t._v(t._s(t.$t("tokens.VALUE_UC")))]),e("th",[t._v(t._s(t.$t("tokens.TO_UC")))]),e("th",{staticClass:"w3-hide-small"},[t._v(t._s(t.$t("tokens.MOTIVE_UC")))])])]),e("tbody",t._l(t.transfers,function(s){return e("tr",{key:s.id},[e("td",[t._v(t._s(t.dateString(s.orderDate)))]),t.showFrom?e("td",[e("router-link",{staticClass:"w3-tag w3-round-large cursor-pointer noselect",style:{"background-color":t.$store.getters.colorOfInitiative(s.senderId)},attrs:{tag:"div",to:{name:"Initiative",params:{initiativeId:s.receiverId}}}},[t._v("\n            "+t._s(s.senderName)+"\n          ")])],1):t._e(),e("td",[t._v(t._s(t.tokensString(s.value))+" "+t._s(s.assetName))]),e("td",[e("router-link",{staticClass:"w3-tag w3-round-large cursor-pointer noselect",style:{"background-color":t.$store.getters.colorOfInitiative(s.receiverId)},attrs:{tag:"div",to:{name:"Initiative",params:{initiativeId:s.receiverId}}}},[t._v("\n            "+t._s(s.receiverName)+"\n          ")])],1),e("td",{staticClass:"w3-hide-small"},[t._v(t._s(s.motive))])])}))]):e("div",{staticClass:"empty-div"},[t._v("\n    "+t._s(t.$t("general.NO_RESULTS_FOUND"))+"\n  ")]),e("div",{staticClass:"w3-row w3-center w3-margin-top"},[t.showMore?e("button",{staticClass:"w3-button app-button-light",attrs:{type:"button",name:"button"},on:{click:function(s){t.showMoreClick()}}},[t._v("\n      "+t._s(t.$t("general.SHOW_MORE"))+"...\n    ")]):t._e()])])},Z=[],Y=e("6fbe"),J={name:"transfersTable",components:{"app-user-avatar":Y["a"]},props:{url:{type:String,default:""},showFrom:{type:Boolean,default:!1},triggerUpdate:{type:Boolean,default:!1}},watch:{triggerUpdate:function(){this.resetData()}},data:function(){return{transfers:[],currentPage:0,showMore:!0}},methods:{resetData:function(){this.transfers=[],this.currentPage=0,this.getData()},getData:function(){var t=this;this.axios.get(this.url,{params:{page:this.currentPage,size:10,sortDirection:"DESC",sortProperty:"orderDate"}}).then(function(s){s.data.data.length<10&&(t.showMore=!1),t.transfers=t.transfers.concat(s.data.data)})},showMoreClick:function(){this.currentPage+=1,this.getData()},tokensString:function(t){return Object(w["g"])(t)},dateString:function(t){return Object(w["b"])(t)}},created:function(){this.resetData()}},Q=J,q=(e("f2dd"),Object(l["a"])(Q,G,Z,!1,null,"4056397d",null));q.options.__file="TransfersTable.vue";var z=q.exports,X={props:{initiativeId:{type:String,default:""},ofSubinitiatives:{type:Boolean,default:!1},triggerUpdate:{type:Boolean,default:!1}},data:function(){return{transfersTableComponent:K,showFrom:!0}},computed:{url:function(){return this.ofSubinitiatives?this.isTransfersToUsers?"/1/initiative/"+this.initiativeId+"/assignationsOfSubinitiatives":"/1/initiative/"+this.initiativeId+"/transfersFromSubinitiatives":this.isTransfersToUsers?"/1/initiative/"+this.initiativeId+"/assignations":"/1/initiative/"+this.initiativeId+"/transfersToInitiatives"},isTransfersToUsers:function(){return"assignationsTable"===this.transfersTableComponent.name},isTransfersToInitiatives:function(){return"transfersTable"===this.transfersTableComponent.name},transfersTableTransition:function(){return this.isTransfersToUsers?"slideToRight":this.isTransfersToInitiatives?"slideToLeft":void 0}},methods:{goToAssignationsTable:function(){this.transfersTableComponent=K},goToTransfersTable:function(){this.transfersTableComponent=z}}},tt=X,st=(e("0e6c"),Object(l["a"])(tt,M,V,!1,null,"4183300a",null));st.options.__file="TransfersTables.vue";var et=st.exports,it=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-modal"},[e("div",{staticClass:"w3-modal-content"},[e("div",{staticClass:"w3-card-4 app-modal-card"},[e("div",{staticClass:"close-div w3-display-topright w3-xlarge",on:{click:function(s){t.closeThis()}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("div",{staticClass:"w3-container w3-border-bottom"},[e("h2",[t._v(t._s(t.$t("tokens.TRANSFER_TO_INITIATIVE")))])]),t.initiativeOptions.length>0?e("div",{staticClass:"this-container w3-container"},[e("div",{staticClass:"w3-row"},[e("label",{},[e("b",[t._v(t._s(t.$t("tokens.TRANSFER_TO"))+"\n            "),e("span",{staticClass:"w3-small error-text"},[t._v("("+t._s(t.$t("general.REQUIRED"))+")")])])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.transfer.receiverId,expression:"transfer.receiverId"}],staticClass:"w3-select initiative-selector",class:{"error-input":t.subInitiativeEmptyShow},attrs:{name:"transferto"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(t.transfer,"receiverId",s.target.multiple?e:e[0])}}},t._l(t.initiativeOptions,function(s){return e("option",{domProps:{value:s.id}},[t._v("\n              "+t._s(s.meta.name)+"\n            ")])}))]),e("app-error-panel",{attrs:{show:t.subInitiativeEmptyShow,message:t.$t("general.FIELD_CANNOT_BE_EMPTY")}}),e("br"),e("div",{staticClass:"w3-row"},[e("app-initiative-assets-assigner",{attrs:{initiativeId:t.initiative.id,initiativeName:t.initiative.meta.name,assetId:t.assetId,showSelector:!0,showError:t.assetsErrorShow},on:{updated:function(s){t.assetsSelected(s)}}})],1),e("app-error-panel",{attrs:{show:t.assetsErrorShow,message:t.$t("tokens.ZERO_TOKENS_ERROR")}}),e("div",{staticClass:"w3-row"},[e("label",{},[e("b",[t._v(t._s(t.$t("tokens.MOTIVE"))+"\n            "),e("span",{staticClass:"w3-small error-text"},[t._v("("+t._s(t.$t("general.REQUIRED"))+")")])])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.transfer.motive,expression:"transfer.motive"}],staticClass:"w3-input w3-hover-light-grey",class:{"error-input":t.motiveErrorShow},attrs:{type:"text"},domProps:{value:t.transfer.motive},on:{input:function(s){s.target.composing||t.$set(t.transfer,"motive",s.target.value)}}}),e("app-error-panel",{attrs:{show:t.motiveEmptyShow,message:t.$t("general.FIELD_CANNOT_BE_EMPTY")}}),e("app-error-panel",{attrs:{show:t.motiveTooLarge,message:t.$t("general.FIELD_TOO_LONG")}}),e("br"),e("label",{},[e("b",[t._v(t._s(t.$t("general.NOTES")))])]),e("app-markdown-editor",{attrs:{keepBackup:!1,showBorder:!0},model:{value:t.transfer.notes,callback:function(s){t.$set(t.transfer,"notes",s)},expression:"transfer.notes"}}),e("br")],1),e("hr"),e("div",{staticClass:"bottom-btns-row w3-row-padding"},[e("div",{staticClass:"w3-col m6"},[e("button",{staticClass:"w3-button app-button-light",attrs:{type:"button"},on:{click:function(s){t.closeThis()}}},[t._v("\n              "+t._s(t.$t("general.CANCEL"))+"\n            ")])]),e("div",{staticClass:"w3-col m6"},[e("button",{staticClass:"w3-button app-button",attrs:{type:"button"},on:{click:function(s){t.accept()}}},[t._v("\n              "+t._s(t.$t("general.ACCEPT"))+"\n            ")])])])],1):e("div",{staticClass:"w3-row w3-margin-top"},[e("div",{staticClass:"error-panel w3-padding"},[t._v("\n          "+t._s(t.$t("tokens.NO_PARENTS_ERROR",{name:t.initiative.meta.name}))+"\n        ")])])])])])},at=[],nt=e("be94"),ot=e("2f62"),rt=e("30c1"),ct={props:{initiative:{type:Object},assetId:{type:String}},components:{"app-initiative-assets-assigner":rt["a"]},data:function(){return{transfer:{motive:"",notes:"",assets:[]},subInitiativeEmptyError:!1,motiveEmptyError:!1,assetsError:!1}},computed:{initiativeOptions:function(){var t=[];for(var s in this.initiative.parents.length>0&&t.push(this.initiative.parents[this.initiative.parents.length-1]),this.initiative.subInitiatives)t.push(this.initiative.subInitiatives[s]);return t},motiveEmptyShow:function(){return this.motiveEmptyError&&""===this.transfer.motive},motiveErrorShow:function(){return this.motiveEmptyShow||this.motiveTooLarge},motiveTooLarge:function(){return this.transfer.motive.length>55},subInitiativeEmptyShow:function(){return this.subInitiativeEmptyError&&this.isSubInitiativeEmpty},isSubInitiativeEmpty:function(){return"undefined"===typeof this.transfer.receiverId||""===this.transfer.receiverId},assetsAreZero:function(){return!this.transfer.assetId||!(this.transfer.value>0)},assetsErrorShow:function(){return this.assetsError&&this.assetsAreZero}},methods:Object(nt["a"])({},Object(ot["b"])(["showOutputMessage"]),{closeThis:function(){this.$emit("close")},assetsSelected:function(t){t.length>0&&(this.transfer.assetId=t[0].assetId,this.transfer.value=t[0].value,this.transfer.senderId=t[0].senderId)},accept:function(){var t=this,s=!0;""===this.transfer.motive&&(this.motiveEmptyError=!0,s=!1),this.motiveTooLarge&&(s=!1),this.isSubInitiativeEmpty&&(this.subInitiativeEmptyError=!0,s=!1),this.assetsAreZero&&(this.assetsError=!0,s=!1),s&&this.axios.post("/1/initiative/"+this.initiative.id+"/transferToInitiative",this.transfer).then(function(s){t.$store.commit("triggerUpdateAssets"),t.$emit("created"),t.closeThis()})}})},lt=ct,ut=(e("db28"),Object(l["a"])(lt,it,at,!1,null,"3aa50f54",null));ut.options.__file="NewInitiativeTransferModal.vue";var dt=ut.exports,vt=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"w3-modal"},[i("div",{staticClass:"w3-modal-content"},[i("div",{staticClass:"w3-card-4 app-modal-card"},[i("div",{staticClass:"close-div w3-display-topright w3-xlarge",on:{click:function(s){t.closeThis()}}},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"w3-container w3-border-bottom"},[i("transition",{attrs:{name:"fadeenter",mode:"out-in"}},[i("h2",{key:t.isPeerReviewed},[t._v("\n            "+t._s(t.isPeerReviewed?t.$t("tokens.PEER_REVIEW_TITLE"):t.$t("tokens.DIRECT_TITLE"))+"\n          ")])])],1),i("div",{staticClass:"this-container w3-container"},[i("div",{staticClass:"section-tabs w3-row"},[i("div",{staticClass:"w3-col s6 tablink w3-bottombar w3-hover-light-grey w3-padding",class:{"border-blue-app":t.isDirect},attrs:{id:"T_directTransferUser"},on:{click:function(s){t.assignation.type=t.DIRECT_ID()}}},[i("h5",{class:{"bold-text":t.isDirect}},[t._v(t._s(t.$t("tokens.DIRECT")))])]),i("div",{staticClass:"w3-col s6 tablink w3-bottombar w3-hover-light-grey w3-padding",class:{"border-blue-app":t.isPeerReviewed},attrs:{id:"T_peerReviewedTransferUser"},on:{click:function(s){t.assignation.type=t.PEER_REVIEWED_ID()}}},[i("h5",{class:{"bold-text":t.isPeerReviewed}},[t._v(t._s(t.$t("tokens.PEER_REVIEWED")))])])]),i("br"),i("div",{staticClass:"slider-container"},[i("transition",{attrs:{name:"slideDownUp",mode:"out-in"}},[i("keep-alive",[i(t.isDirect?"app-direct-assignation":"app-peer-reviewed-assignation",{tag:"component",on:{updated:function(s){t.receiversUpdated(s)}}})],1)],1),i("app-error-panel",{attrs:{show:t.notEnoughReceivers,message:t.$t("toknes.NOT_ENOUGH_RECEIVERS")}}),i("app-error-panel",{attrs:{show:t.notEnoughEvaluators,message:t.$t("toknes.NOT_ENOUGH_EVALS")}}),i("app-error-panel",{attrs:{show:t.allDonorsShow,message:t.$t("toknes.NOT_ALL_DONORS")}}),i("app-error-panel",{attrs:{show:t.percentagesWrongShow,message:t.$t("toknes.PERCENTAGES_WRONG")}})],1),i("div",{staticClass:"w3-row"},[i("app-initiative-assets-assigner",{attrs:{initiativeId:t.initiative.id,initiativeName:t.initiative.meta.name,type:"member-assigner",assetId:t.assetId,showSelector:!0,showError:t.assetsZeroShow},on:{updated:function(s){t.assetsSelected(s)}}}),i("app-error-panel",{attrs:{show:t.assetsZeroShow,message:t.$t("tokens.NO_ASSETS_SELECTED")}})],1),i("div",{staticClass:"w3-row"},[i("label",{},[i("b",[t._v(t._s(t.$t("tokens.MOTIVE"))+" "),i("span",{staticClass:"w3-small error-text"},[t._v("("+t._s(t.$t("general.REQUIRED"))+")")])])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.assignation.motive,expression:"assignation.motive"}],staticClass:"w3-input w3-hover-light-grey",class:{"error-input":t.motiveErrorShow},attrs:{type:"text"},domProps:{value:t.assignation.motive},on:{input:function(s){s.target.composing||t.$set(t.assignation,"motive",s.target.value)}}}),i("app-error-panel",{attrs:{show:t.motiveEmptyShow,message:t.$t("general.FIELD_CANNOT_BE_EMPTY")}}),i("app-error-panel",{attrs:{show:t.motiveTooLarge,message:t.$t("general.FIELD_TOO_LONG")}}),i("br"),i("label",{},[i("b",[t._v(t._s(t.$t("general.NOTES")))])]),i("app-markdown-editor",{attrs:{keepBackup:!1,showBorder:!0},model:{value:t.assignation.notes,callback:function(s){t.$set(t.assignation,"notes",s)},expression:"assignation.notes"}}),i("br")],1),i("div",{staticClass:"slider-container"},[i("transition",{attrs:{name:"slideDownUp"}},[t.isPeerReviewed?i("div",{staticClass:"w3-row"},[i("div",{staticClass:"w3-col s12"},[i("div",{staticClass:"w3-row"},[i("label",{},[i("b",[t._v(t._s(t.$t("general.CONFIGURATION")))]),i("popper",{attrs:{trigger:"hover",options:t.popperOptions,"delay-on-mouse-in":600,"delay-on-mouse-out":800}},[i("app-help-popper",{attrs:{title:t.$t("help.PEER-REV-CONFIG-TT"),details:t.$t("help.PEER-REV-CONFIG-DET")}}),i("div",{staticClass:"help-icon",attrs:{slot:"reference"},on:{click:function(s){t.$emit("docView")}},slot:"reference"},[i("img",{attrs:{src:e("8768"),alt:""}})])],1)],1)]),i("div",{staticClass:"w3-row-padding configuration-row"},[i("div",{staticClass:"w3-col m6"},[i("div",{staticClass:"w3-row"},[i("div",{staticClass:"w3-col l3 m12"},[i("label",{staticClass:"w3-left first-label"},[t._v(t._s(t.$t("tokens.INITIAL_STATE"))+":")])]),i("div",{staticClass:"w3-col l9 m12 w3-center state-btns"},[i("button",{staticClass:"w3-button",class:{"app-button":t.isStartOnHold,"app-button-light":!t.isStartOnHold},attrs:{name:"button"},on:{click:function(s){t.assignation.config.startState="ON_HOLD"}}},[t._v("\n                          "+t._s(t.$t("tokens.ON_HOLD"))+"\n                        ")]),i("button",{staticClass:"w3-button",class:{"app-button":t.isStartOpen,"app-button-light":!t.isStartOpen},attrs:{name:"button"},on:{click:function(s){t.assignation.config.startState="OPEN"}}},[t._v("\n                          "+t._s(t.$t("tokens.OPEN"))+"\n                        ")])])]),i("div",{staticClass:"w3-row"},[i("label",{staticClass:"w3-left first-label"},[t._v(t._s(t.$t("tokens.MAX_DURATION")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.assignation.config.maxDuration,expression:"assignation.config.maxDuration"}],staticClass:"w3-input w3-left input-number",attrs:{type:"number"},domProps:{value:t.assignation.config.maxDuration},on:{input:function(s){s.target.composing||t.$set(t.assignation.config,"maxDuration",s.target.value)}}}),i("label",{staticClass:"w3-left"},[t._v(t._s(t.$tc("tokens.DAYS",t.assignation.config.maxDuration)))])])]),i("div",{staticClass:"w3-col m6"},[i("div",{staticClass:"w3-row"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.assignation.config.selfBiasVisible,expression:"assignation.config.selfBiasVisible"}],staticClass:"w3-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.assignation.config.selfBiasVisible)?t._i(t.assignation.config.selfBiasVisible,null)>-1:t.assignation.config.selfBiasVisible},on:{change:function(s){var e=t.assignation.config.selfBiasVisible,i=s.target,a=!!i.checked;if(Array.isArray(e)){var n=null,o=t._i(e,n);i.checked?o<0&&t.$set(t.assignation.config,"selfBiasVisible",e.concat([n])):o>-1&&t.$set(t.assignation.config,"selfBiasVisible",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.assignation.config,"selfBiasVisible",a)}}}),i("label",[t._v(t._s(t.$t("tokens.SELF_BIAS_VISIBLE")))])]),i("div",{staticClass:"w3-row"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.assignation.config.evaluationsVisible,expression:"assignation.config.evaluationsVisible"}],staticClass:"w3-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.assignation.config.evaluationsVisible)?t._i(t.assignation.config.evaluationsVisible,null)>-1:t.assignation.config.evaluationsVisible},on:{change:function(s){var e=t.assignation.config.evaluationsVisible,i=s.target,a=!!i.checked;if(Array.isArray(e)){var n=null,o=t._i(e,n);i.checked?o<0&&t.$set(t.assignation.config,"evaluationsVisible",e.concat([n])):o>-1&&t.$set(t.assignation.config,"evaluationsVisible",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.assignation.config,"evaluationsVisible",a)}}}),i("label",[t._v(t._s(t.$t("tokens.ALL_EVALS_VISIBLE")))])])])])])]):t._e()])],1),i("hr"),t.assetsZeroShow?i("div",{staticClass:"w3-row error-panel w3-padding w3-round w3-margin-bottom"},[i("div",{staticClass:"w3-col l10"},[t._v("\n            "+t._s(t.$t("tokens.NO_ASSETS_TRASFERRED"))+"\n          ")]),i("div",{staticClass:"w3-col l2 w3-center"},[i("button",{staticClass:"w3-button app-button w3-round-large",attrs:{name:"button"},on:{click:function(s){t.assetsEmptyErrorConfirmed=!0}}},[t._v(t._s(t.$t("general.OK")))])])]):t._e(),i("div",{staticClass:"bottom-btns-row w3-row-padding"},[i("div",{staticClass:"w3-col m6"},[i("button",{staticClass:"w3-button app-button-light",attrs:{type:"button"},on:{click:function(s){t.closeThis()}}},[t._v("\n              "+t._s(t.$t("general.CANCEL"))+"\n            ")])]),i("div",{staticClass:"w3-col m6"},[i("button",{staticClass:"w3-button app-button",attrs:{type:"button"},on:{click:function(s){t.accept()}}},[t._v("\n              "+t._s(t.$t("general.ACCEPT"))+"\n            ")])])])])])])])},pt=[],ht=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{},[t._m(0),e("div",{staticClass:"w3-row"},[e("app-member-selector",{attrs:{members:t.members,resetAfterSelect:t.multiple},on:{select:function(s){t.newReceiverSelected(s)}}})],1),t.multiple?e("div",{staticClass:"w3-row w3-margin-top w3-border w3-round"},[e("div",{staticClass:"percentages-container"},[e("app-user-percentages",{attrs:{usersData:t.receiversData,showDontKnow:!1,showTotal:!1,showRemove:!0},on:{remove:function(s){t.removeReceiver(s)},"users-data-updated":function(s){t.receiversUpdated(s)}}})],1),0===t.receiversData.length?e("div",{staticClass:"w3-padding"},[e("i",[t._v(t._s(t.$t("tokens.NO_MEMBERS_SELECTED")))])]):t._e()]):t._e(),e("div",{staticClass:"w3-row w3-margin-top"},[t._v("\n    or "),e("button",{staticClass:"w3-button app-button",attrs:{type:"button",name:"button"},on:{click:function(s){t.multiple=!t.multiple}}},[t._v("\n      "+t._s(t.multiple?t.$t("$tokens.ONE_RECEIVER"):t.$t("tokens.MULTIPLE_RECEIVERS"))+"\n    ")])])])},gt=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-row w3-margin-bottom"},[e("label",{attrs:{for:""}},[e("b",[t._v("Receiver: ")])])])}],ft=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"w3-row-padding autocomplete-wrapper"},[null!==t.selected?e("div",{staticClass:"w3-col s2"},[e("div",{staticClass:"w3-cell w3-cell-middle",staticStyle:{width:"30px"}},[e("img",{staticStyle:{width:"35px"},attrs:{src:t.selected.pictureUrl}})])]):t._e(),e("div",{staticClass:"w3-col s10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"w3-input w3-hover-light-grey autocomplete-inputs",attrs:{type:"text",id:"T_selectMemberTransferModal",placeholder:"select member",autocomplete:"off"},domProps:{value:t.type},on:{input:[function(s){s.target.composing||(t.type=s.target.value)},function(s){t.input(t.type)}],dblclick:t.showAll,blur:t.hideAll,keydown:t.keydown,focus:t.focus}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"w3-row autocomplete transition autocomplete-list"},[e("ul",t._l(t.json,function(s,i){return e("li",{class:t.activeClass(i),attrs:{transition:"showAll"}},[e("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.selectList(s)},mousemove:function(s){t.mousemove(i)}}},[e("app-user-avatar",{attrs:{user:s}})],1)])}))])])},wt=[],mt={name:"member-selector",props:{members:Array,resetAfterSelect:{type:Boolean,default:!1},init:{type:Object,default:function(){return null}},anchor:{type:String,default:"c1Id"},onInput:Function,onShow:Function,onBlur:Function,onHide:Function,onFocus:Function,onBeforeRequest:Function,onRequestLoaded:Function},data:function(){return{showList:!1,type:"",focusList:"",label:"nickname"}},computed:{json:function(){return this.members},selected:function(){return""!==this.type&&this.json.length>0?this.json[this.focusList]:null}},methods:{clearInput:function(){this.showList=!1,this.type="",this.focusList=""},cleanUp:function(t){return JSON.parse(JSON.stringify(t))},input:function(t){this.json.length>0?this.showList=!0:this.hideAll(),this.onInput&&this.onInput(t)},showAll:function(){this.onShow&&this.onShow(),this.showList=!0},hideAll:function(t){var s=this;this.onBlur&&this.onBlur(t),setTimeout(function(){s.onHide&&s.onHide(),s.showList=!1},250)},focus:function(t){this.focusList=0,this.onFocus&&this.onFocus(t),this.showAll()},mousemove:function(t){this.focusList=t},keydown:function(t){var s=t.keyCode;if(this.showList){switch(s){case 40:this.focusList++;break;case 38:this.focusList--;break;case 13:this.selectList(this.json[this.focusList]),this.showList=!1;break;case 27:this.showList=!1;break}var e=this.json.length-1;this.focusList=this.focusList>e?0:this.focusList<0?e:this.focusList}},activeClass:function(t){return{"focus-list":t===this.focusList}},selectList:function(t){var s=this.cleanUp(t);this.resetAfterSelect?this.clearInput():this.type=s[this.label],this.showList=!1,this.$emit("select",s)}},created:function(){this.type=this.init?this.init.nickname:""}},_t=mt,bt=(e("8d5c"),Object(l["a"])(_t,ft,wt,!1,null,"0388f20b",null));bt.options.__file="MemberSelector.vue";var Et=bt.exports,Ct={components:{"app-member-selector":Et,"app-user-percentages":y},data:function(){return{multiple:!1,receiversData:[]}},computed:{members:function(){return this.$store.getters.initiativeMembersUsers()}},methods:{indexOfUser:function(t){for(var s in this.receiversData)if(this.receiversData[s].user.c1Id===t.c1Id)return s;return-1},removeReceiver:function(t){var s=this.indexOfUser(t.user);s>-1&&this.receiversData.splice(s,1)},newReceiverSelected:function(t){if(this.multiple){var s=this.indexOfUser(t);-1===s&&this.receiversData.push({user:t,percent:0,isDonor:!1})}else this.$emit("updated",{receivers:[{user:t,percent:100}]})},receiversUpdated:function(){this.$emit("updated",{receivers:this.receiversData})}}},Tt=Ct,kt=(e("f13e"),Object(l["a"])(Tt,ht,gt,!1,null,"3b4e9ca9",null));kt.options.__file="DirectAssignation.vue";var Dt=kt.exports,Rt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{},[e("div",{staticClass:"w3-row-padding"},[e("div",{staticClass:"receivers-col w3-col m6"},[e("h5",[t._v(t._s(t.$t("tokens.RECEIVERS"))+":")]),e("div",{staticClass:"w3-row users-list"},[e("app-users-list",{attrs:{usersInit:t.receivers,type:"receivers"},on:{updated:function(s){t.receiversUpdated(s)}}})],1),e("div",{staticClass:"slider-container"},[e("transition",{attrs:{name:"slideDownUp"}},[t.donorUsers.length>0?e("div",{staticClass:"w3-row"},[e("div",{staticClass:"w3-panel light-grey w3-padding",domProps:{innerHTML:t._s(t.$t("tokens.DONOR_WARNING"))}})]):t._e()])],1)]),e("div",{staticClass:"w3-col m6"},[e("h5",[t._v(t._s(t.$t("tokens.EVALUATORS"))+": "+t._s(t.sameAsReceivers?"("+t.$t("tokens.SAME_AS_RECEIVERS")+")":""))]),t.sameAsReceivers?t._e():e("div",{staticClass:"w3-row users-list",class:{"covered-div":t.sameAsReceivers}},[e("app-users-list",{attrs:{usersInit:t.evaluators,type:"evaluators"},on:{updated:function(s){t.evaluatorsUpdated(s)}}})],1),e("div",{staticClass:"w3-row w3-center button-evaluators"},[e("button",{staticClass:"w3-button app-button",on:{click:function(s){t.switchSameAsReceivers()}}},[t._v("\n          "+t._s(t.sameAsReceivers?t.$t("tokens.DIFF_FROM_RECEIVERS_Q"):t.$t("tokens.SAME_AS_RECEIVERS"))+"\n        ")])])])])])},yt=[],Ot=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{},[e("table",{staticClass:"w3-table w3-striped w3-bordered w3-centered"},[e("tbody",t._l(t.usersData,function(s){return e("tr",{key:s.user.c1Id},[e("td",{staticClass:"avatar-col"},[e("app-user-avatar",{staticClass:"user-container",attrs:{user:s.user,showName:!1}})],1),e("td",[e("span",{class:{striketrough:s.isDonor}},[t._v(t._s(s.user.nickname))])]),t.isReceivers?e("td",[e("div",{staticClass:"w3-right donate-btn-container"},[e("button",{staticClass:"donate-button w3-button w3-small app-button",on:{click:function(e){t.donorClicked(s.user)}}},[t._v("\n              "+t._s(s.isDonor?"receive":"donate")+"\n            ")])])]):t._e(),e("td",[e("div",{staticClass:"w3-right w3-button w3-xlarge remove-button",on:{click:function(e){t.removeUser(s.user)}}},[t._m(0,!0)])])])}))]),e("div",{staticClass:"w3-row w3-margin-top"},[e("app-member-selector",{staticClass:"w3-col m8 user-selector w3-margin-bottom",attrs:{members:t.members,resetAfterSelect:!0},on:{select:function(s){t.addUser(s)}}}),e("div",{staticClass:"w3-col m4 "},[e("button",{staticClass:"w3-button app-button",on:{click:function(s){t.addAllMembers()}}},[t._v("add all")])])],1)])},St=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("i",{staticClass:"fa fa-times-circle-o gray-1-color",attrs:{"aria-hidden":"true"}})])}],It={props:{usersInit:{type:Array,default:function(){return[]}},type:{type:String,default:"none"}},components:{"app-member-selector":Et},data:function(){return{usersData:[]}},computed:{isReceivers:function(){return"receivers"===this.type},members:function(){return this.$store.getters.initiativeMembersUsers()}},methods:{addAllMembers:function(){for(var t in this.usersData=[],this.members)this.usersData.push({user:this.members[t],percent:0,isDonor:!1});this.$emit("updated",this.usersData)},addUser:function(t){-1===this.indexOfUser(t)&&(this.usersData.push({user:t,percent:0,isDonor:!1}),this.$emit("updated",this.usersData))},removeUser:function(t){var s=this.indexOfUser(t);-1!==s&&(this.usersData.splice(s,1),this.$emit("updated",this.usersData))},indexOfUser:function(t){for(var s in this.usersData)if(this.usersData[s].user.c1Id===t.c1Id)return s;return-1},donorClicked:function(t){var s=this.indexOfUser(t);-1!==s&&(this.usersData[s].isDonor=!this.usersData[s].isDonor,this.$emit("updated",this.usersData))}},mounted:function(){this.usersData=JSON.parse(JSON.stringify(this.usersInit))}},At=It,$t=(e("b292"),Object(l["a"])(At,Ot,St,!1,null,"54d76782",null));$t.options.__file="UsersList.vue";var Nt=$t.exports,Ut={components:{"app-users-list":Nt},data:function(){return{receivers:[],evaluators:[],sameAsReceivers:!0}},computed:{donorUsers:function(){var t=[];for(var s in this.receivers){var e=this.receivers[s];e.isDonor&&t.push(e)}return t},donorUsersStr:function(){for(var t="",s=0;s<this.donorUsers.length;s++)0===s?t+="":s===this.donorUsers.length-1?t+=" and ":t+=", ",t+=this.donorUsers[s].user.nickname;return t}},methods:{receiversUpdated:function(t){this.receivers=t,this.sameAsReceivers&&(this.evaluators=t),this.emitUpdated()},evaluatorsUpdated:function(t){this.evaluators=t,this.emitUpdated()},switchSameAsReceivers:function(){this.sameAsReceivers=!this.sameAsReceivers,this.emitUpdated()},emitUpdated:function(){var t;t=this.sameAsReceivers?{receivers:this.receivers,evaluators:this.receivers}:{receivers:this.receivers,evaluators:this.evaluators},this.$emit("updated",t)}}},Lt=Ut,Pt=(e("a152"),Object(l["a"])(Lt,Rt,yt,!1,null,"14d93286",null));Pt.options.__file="PeerReviewedAssignation.vue";var xt=Pt.exports,Mt={props:{initiative:{type:Object},assetId:{type:String}},components:{"app-initiative-assets-assigner":rt["a"],"app-direct-assignation":Dt,"app-peer-reviewed-assignation":xt},data:function(){return{assignation:{type:this.DIRECT_ID(),motive:"",notes:"",config:{selfBiasVisible:!0,evaluationsVisible:!1,maxDuration:8,minDuration:2,startState:"OPEN"}},motiveEmptyError:!1,assetsZeroError:!1,assetsAreZero:!1,notEnoughReceivers:!1,notEnoughEvaluators:!1,allDonorsError:!1,assetsEmptyErrorConfirmed:!1,percentagesWrong:!1}},computed:{isDirect:function(){return this.assignation.type===this.DIRECT_ID()},isPeerReviewed:function(){return this.assignation.type===this.PEER_REVIEWED_ID()},motiveErrorShow:function(){return this.motiveEmptyShow||this.motiveTooLarge},motiveEmptyShow:function(){return this.motiveEmptyError&&""===this.assignation.motive},motiveTooLarge:function(){return this.assignation.motive.length>55},assetsZeroShow:function(){return this.assetsZeroError&&this.assetsAreZero&&!this.assetsEmptyErrorConfirmed},existNotDonors:function(){if(this.assignation.peerReviewReceivers)for(var t in this.assignation.peerReviewReceivers)if(!this.assignation.peerReviewReceivers[t].isDonor)return!0;return!1},allDonorsShow:function(){return this.allDonorsError&&!this.existNotDonors},isStartOnHold:function(){return"ON_HOLD"===this.assignation.config.startState},isStartOpen:function(){return"OPEN"===this.assignation.config.startState},sumOfPercentages:function(){if(this.assignation.directReceivers){var t=0;for(var s in this.assignation.directReceivers)t+=this.assignation.directReceivers[s].percent;return t}return 0},sumOfPercentagesWrong:function(){return Math.abs(this.sumOfPercentages-100)>.001},percentagesWrongShow:function(){return this.percentagesWrong&&this.sumOfPercentagesWrong},popperOptions:function(){return{placement:"bottom",modifiers:{preventOverflow:{enabled:!0,boundariesElement:"viewport"}}}}},methods:Object(nt["a"])({},Object(ot["b"])(["showOutputMessage"]),{DIRECT_ID:function(){return"DIRECT"},PEER_REVIEWED_ID:function(){return"PEER_REVIEWED"},closeThis:function(){this.$emit("close")},assignationUpdated:function(t){this.assignation=t},assetsSelected:function(t){this.assignation.assets=t,this.assetsZeroShow&&(this.areAssetsZero(),this.assetsAreZero&&(this.assetsZeroError=!1))},areAssetsZero:function(){var t=!0;if(this.assignation.assets)for(var s in this.assignation.assets)0!==this.assignation.assets[s].value&&(t=!1);this.assetsAreZero=t},receiversUpdated:function(t){this.notEnoughReceivers&&t.receivers.length>0&&(this.notEnoughReceivers=!1),this.notEnoughEvaluators&&t.evaluators.length>0&&(this.notEnoughEvaluators=!1),this.allDonorsError&&this.existNotDonors&&(this.allDonorsError=!1),this.isDirect?this.directReceiversSelected(t):this.peerReviewReceiversSelected(t)},directReceiversSelected:function(t){this.assignation.directReceivers=t.receivers},peerReviewReceiversSelected:function(t){this.assignation.peerReviewReceivers=t.receivers,this.assignation.peerReviewEvaluators=t.evaluators},accept:function(){var t=this,s=!0;if(""===this.assignation.motive&&(this.motiveEmptyError=!0,s=!1),this.motiveTooLarge&&(s=!1),this.areAssetsZero(),this.assetsAreZero&&(this.assetsEmptyErrorConfirmed||(s=!1,this.assetsZeroError=!0)),this.isDirect?(this.assignation.directReceivers?0===this.assignation.directReceivers.length&&(this.notEnoughReceivers=!0,s=!1):(this.notEnoughReceivers=!0,s=!1),this.sumOfPercentagesWrong&&(this.percentagesWrong=!0,s=!1)):(this.assignation.peerReviewReceivers?(0===this.assignation.peerReviewReceivers.length&&(this.notEnoughReceivers=!0,s=!1),this.existNotDonors||(this.allDonorsError=!0,s=!1)):(this.notEnoughReceivers=!0,s=!1),this.assignation.peerReviewEvaluators?0===this.assignation.peerReviewEvaluators.length&&(this.notEnoughEvaluators=!0,s=!1):(this.notEnoughEvaluators=!0,s=!1)),s){var e={};e.type=this.assignation.type,e.assets=this.assignation.assets,e.initiativeId=this.assignation.assets[0].senderId,e.motive=this.assignation.motive,e.notes=this.assignation.notes,e.config=this.assignation.config,this.isDirect?e.receivers=this.assignation.directReceivers:(e.receivers=this.assignation.peerReviewReceivers,e.evaluators=this.assignation.peerReviewEvaluators),this.axios.post("/1/initiative/"+e.initiativeId+"/assignation",e).then(function(s){t.$store.commit("triggerUpdateAssets"),t.$emit("created"),t.closeThis()})}}})},Vt=Mt,Ft=(e("449d"),Object(l["a"])(Vt,vt,pt,!1,null,"1ebec66c",null));Ft.options.__file="NewAssignationModal.vue";var Bt=Ft.exports,jt={components:{"app-new-token-modal":d,"app-asset-distribution-chart":v["a"],"app-transfers-tables":et,"app-assignation-modal":x,"app-new-initiative-transfer-modal":dt,"app-new-assignation-modal":Bt},data:function(){return{showNewTokenModal:!1,showActionMenu:!1,assetIdToTransfer:"",showNewAssignationModal:!1,showNewInitiativeTransferModal:!1,triggerUpdate:!1,assets:[],showDeleted:!1,loading:!1,toggleDropdown:!1}},computed:{initiative:function(){return this.$store.state.initiative.initiative},hasSubinitiatives:function(){return this.initiative.subInitiatives.length>0},isLoggedAnAdmin:function(){return this.$store.getters.isLoggedAnAdmin},showAssignationModal:function(){for(var t in this.$route.matched){var s=this.$route.matched[t];if("InitiativeAssignation"===s.name)return!0}return!1},assetsMenuItems:function(){var t=[];return t.push({text:this.$t("general.CREATE_NEW"),value:"create-new",faIcon:"fa-plus"}),t.push({text:this.showDeleted?this.$t("tokens.HIDE_DELETED"):this.$t("tokens.SHOW_DELETED"),value:"toggle-deleted",faIcon:this.showDeleted?"fa-ban":"fa-eye"}),t},popperOptions:function(){return{placement:"bottom",modifiers:{preventOverflow:{enabled:!1},flip:{enabled:!1}}}}},methods:{toggleDeleted:function(){this.showDeleted=!this.showDeleted,this.updateAssets(),this.toggleDropdown=!this.toggleDropdown},updateAssets:function(){var t=this;this.loading=!0,this.axios.get("/1/initiative/"+this.initiative.id+"/assets",{params:{addDeleted:this.showDeleted}}).then(function(s){t.loading=!1,t.assets=s.data.data})},triggerUpdateCall:function(){this.triggerUpdate=!this.triggerUpdate},tokenModalClosed:function(){this.showNewTokenModal=!1,this.updateAssets()},newAssignation:function(t){this.assetIdToTransfer=t.assetId,this.showNewAssignationModal=!0},newTransfer:function(t){this.assetIdToTransfer=t.assetId,this.showNewInitiativeTransferModal=!0},clickOutsideShowMenu:function(){this.showActionMenu=!1},createNewToken:function(){this.showNewTokenModal=!0,this.toggleDropdown=!this.toggleDropdown}},created:function(){this.updateAssets()}},Wt=jt,Ht=(e("81b4"),Object(l["a"])(Wt,i,a,!1,null,"11dbb093",null));Ht.options.__file="TransfersSection.vue";s["default"]=Ht.exports},"81b4":function(t,s,e){"use strict";var i=e("71cc"),a=e.n(i);a.a},"83e0":function(t,s,e){},8768:function(t,s,e){t.exports=e.p+"img/question-icon.ba91fe39.svg"},"8d5c":function(t,s,e){"use strict";var i=e("ff90"),a=e.n(i);a.a},"920b":function(t,s,e){},a152:function(t,s,e){"use strict";var i=e("920b"),a=e.n(i);a.a},a1db:function(t,s,e){},b292:function(t,s,e){"use strict";var i=e("fd9b"),a=e.n(i);a.a},c250:function(t,s,e){},c251:function(t,s,e){"use strict";var i=e("3068"),a=e.n(i);a.a},d822:function(t,s,e){"use strict";var i=e("c250"),a=e.n(i);a.a},db28:function(t,s,e){"use strict";var i=e("760c"),a=e.n(i);a.a},df27:function(t,s,e){},f13e:function(t,s,e){"use strict";var i=e("df27"),a=e.n(i);a.a},f2dd:function(t,s,e){"use strict";var i=e("fdf7"),a=e.n(i);a.a},fd9b:function(t,s,e){},fdf7:function(t,s,e){},ff90:function(t,s,e){}}]);
//# sourceMappingURL=chunk-5f1f7fd6.574d845d.js.map